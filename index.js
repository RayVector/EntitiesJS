/*! For license information please see index.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("EntitiesJS",[],e):"object"==typeof exports?exports.EntitiesJS=e():t.EntitiesJS=e()}(this,(()=>(()=>{var t={61:(t,e,n)=>{var r=n(698).default;function o(){"use strict";t.exports=o=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),u=new E(r||[]);return a(i,"_invoke",{value:$(t,n,u)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d={};function v(){}function y(){}function g(){}var b={};f(b,l,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(L([])));w&&w!==n&&i.call(w,l)&&(b=w);var k=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,a,u,l){var c=p(t[o],t,a);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==r(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,u,l)}),(function(t){n("throw",t,u,l)})):e.resolve(f).then((function(t){s.value=t,u(s)}),(function(t){return n("throw",t,u,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}})}function $(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=j(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function j(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=p(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:_}}function _(){return{value:void 0,done:!0}}return y.prototype=g,a(k,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=f(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,f(t,s,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},x(O.prototype),f(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(h(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(k),f(k,s,"Generator"),f(k,l,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},698:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},687:(t,e,n)=>{var r=n(61)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(r),n.d(r,{$createState:()=>z,$entityList:()=>I,$entityPollingList:()=>F,$prepare:()=>C,$readById:()=>M,$setEntityValue:()=>J,$validateEntityApiEnabled:()=>Q,ApiGqlHooks:()=>Lt,ApiRestHooks:()=>kt,DataType:()=>l,Entity:()=>B,EntityApi:()=>D,EntityMock:()=>at,EntityOptions:()=>R,JSONType:()=>u,LoadingStates:()=>N,NumberId:()=>a,arrayItemsPayloadHandler:()=>h,arrayOfItemsValueHandler:()=>c,dataTypes:()=>d,debounce:()=>S,deepEmptyPopulate:()=>L,deepPopulate:()=>E,entityPayloadHandler:()=>f,falsyCheck:()=>A,idValueHandler:()=>s,incrementor:()=>ut,mockDataHooks:()=>ot,populateSelf:()=>_,randomArray:()=>nt,randomBoolean:()=>et,randomEntity:()=>rt,randomNumber:()=>X,randomString:()=>K,randomWords:()=>Z,randomWordsList:()=>tt,typeofCheck:()=>it,types:()=>p});var a=function(t){if(null===t||"number"==typeof t)return t},u=function(t){try{return JSON.parse(t)}catch(t){return!1}},l=e((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return t};o(this,t),i(this,"type",null),i(this,"default",null),i(this,"handler",null),i(this,"valueHandler",null),i(this,"payloadHandler",null),this.type=e,this.default=n,this.handler=r,this.valueHandler=a,this.payloadHandler=u})),c=function(t,e,n){return n.every((function(e){return e instanceof t.$item}))},s=function(t,e,n){return null===n||Number.isInteger(n)},f=function(t){return t.id},h=function(t){return t.map((function(t){return t.id}))},p={ID:new l(a,null,s),STRING:new l(String,""),INTEGER:new l(Number,0),BOOLEAN:new l(Boolean,!1),DATE:new l(Date,new Date,null),ARRAY:new l(Array,[]),ARRAY_ITEMS:new l(Array,[],null,c,h),JSON:new l(u,JSON.stringify({})),OBJECT:new l(Object,{},null,null,f)};const d=Object.assign({},p);function v(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){v(i,r,o,a,u,"next",t)}function u(t){v(i,r,o,a,u,"throw",t)}a(void 0)}))}}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var O=n(687),$=n.n(O);const j="to use API you should turn it on in the options of the entity or in the global options";var P=void 0,S=function(t,e){var n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){t.apply(P,o)}),e)}},E=function t(e,n){for(var r in n)"object"===m(n[r])&&void 0!==e[r]?t(e[r],n[r]):void 0===e[r]&&(e[r]=n[r])},L=function(t,e){var n={};return function t(e,r){for(var o in r)"object"===m(r[o])&&"object"!==m(r[o])?t(e[o],r[o]):n[o]=e[o]}(t,e),n},_=function t(e,n){for(var r in e)void 0!==n[r]&&("object"===m(e[r])?t(e[r],n[r]):e[r]=n[r])},A=function(t){return null!=t&&("boolean"==typeof t||("object"===m(t)?"function"==typeof t.then||Object.keys(t).length:"number"==typeof t||!!t))},T=null,D=e((function t(e){o(this,t),this.$create=e.create,this.$update=e.update,this.$read=e.read,this.$delete=e.delete})),R=e((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t),i(this,"api",{isEnabled:!1,baseUrl:"",alias:"",watcherEnabled:!0,debounceTime:1e3,pollingTime:0,pollingId:null,isFilterByDiffs:!1,isLoadingStatesEnabled:!1,headers:null,gql:{aliasForOne:null,variables:{},queryParams:{}}}),e&&_(this,e)})),N=e((function t(){o(this,t),i(this,"$isLoading",!1),i(this,"$apiRequestId",null)})),B=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),i(this,"$options",new R),i(this,"$isApiLoading",!1),i(this,"$isPrepared",!1),i(this,"$fields",{}),i(this,"$loadingStates",{}),i(this,"$loadingController",null),i(this,"$item",null),new Promise((function(t){null!==r&&W(n),t()})).then((function(){Q(n)&&Object.assign(n,new D(t.apiSchema))}))}var n,r,a,u;return e(t,[{key:"create",value:(u=y($().mark((function t(){var e,n,r,o,i,a,u=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},o=u.length>3&&void 0!==u[3]&&u[3],i=this.createPayload(e,r),Q(this)){t.next=9;break}return Y("api is disabled"),console.info(i),t.abrupt("return");case 9:return t.next=11,this.$create(this,i,null,n);case 11:if(a=t.sent,this.changeApiLoadingStatus(!1),this.updateLoadingByData(!1,i),!o){t.next=18;break}return t.abrupt("return",a);case 18:return t.abrupt("return",this.createPayload(a));case 19:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"read",value:(a=y($().mark((function t(){var e,n,r,o=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:null,n=o.length>1?o[1]:void 0,Q(this)){t.next=5;break}return Y("api is disabled"),t.abrupt("return");case 5:return t.next=7,this.$read(this,e,n);case 7:return r=t.sent,this.changeApiLoadingStatus(!1),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"update",value:(r=y($().mark((function t(){var e,n,r,o,i,a,u,l=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:{},n=l.length>1&&void 0!==l[1]?l[1]:null,r=l.length>2?l[2]:void 0,o=l.length>3&&void 0!==l[3]?l[3]:[],null!==this.$loadingController&&(this.$loadingController.abort(),this.$loadingController=null),i=n||this.createApiPayload(e,o),this.$options.api.isFilterByDiffs)for(a in e)this[a]!==e[a]&&((i={})[a]=e[a]);if(Q(this)){t.next=10;break}return Y("api is disabled"),t.abrupt("return");case 10:return this.updateLoadingByData(!0,i),this.changeApiLoadingStatus(!0),t.next=14,this.$update(this,i,null,r);case 14:return u=t.sent,this.changeApiLoadingStatus(!1),this.updateLoadingByData(!1,i),this.updated(i,u),this.updateState(u),t.abrupt("return",u);case 20:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"updateState",value:function(t){Object.assign(this,t)}},{key:"delete",value:(n=y($().mark((function t(e){var n;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Q(this)){t.next=4;break}return Y("api is disabled"),console.info(this),t.abrupt("return");case 4:return t.next=6,this.$delete(this,e);case 6:return n=t.sent,this.changeApiLoadingStatus(!1),this.updateLoadingByData(!1,this.createPayload()),t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"changeApiLoadingStatus",value:function(t){this.$isApiLoading=t}},{key:"changeApiFieldLoadingStatus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(this.$loadingStates[e].$isLoading=t)}},{key:"updateLoadingByData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r in e)this.changeApiFieldLoadingStatus(t,r);null!==n&&this.changeApiFieldLoadingStatus(t,n)}},{key:"createApiPayload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};for(var r in this.$fields)void 0===this[r]||"id"===r||e.includes(r)||(void 0!==t[r]?n[r]=this.$fields[r].payloadHandler(t[r]):n[r]=this.$fields[r].payloadHandler(this[r]));return n}},{key:"createPayload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};for(var r in this.$fields)void 0===this[r]||e.includes(r)||(void 0!==t[r]?n[r]=t[r]:n[r]=this[r]);return n}},{key:"createState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.createPayload();return Object.keys(t).length?L(e,t):e}},{key:"created",value:function(){return this}},{key:"updated",value:function(t,e){return{entity:this,newValue:t,oldValue:e}}}]),t}();i(B,"globalOptions",new R),i(B,"apiSchema",null);var I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n){var r=new t;setTimeout(y($().mark((function o(){var i;return $().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.read(null,e);case 2:i=o.sent,n(i.map((function(e){return new t(e)})));case 4:case"end":return o.stop()}}),o)}))),0)}))},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n){var r=new t;setTimeout(y($().mark((function o(){var i;return $().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.read(e);case 2:i=o.sent,n(new t(i));case 4:case"end":return o.stop()}}),o)}))),0)}))},C=function(t,e){return W(t),G(t),t.$options.api.isLoadingStatesEnabled&&H(t),V(t),t.$isPrepared||U(t,e),t.$isPrepared=!0,t.created(),t},F=function(){var t=y($().mark((function t(e,n){var r;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=new e).$options.api.pollingTime>0?(clearInterval(r.$options.api.pollingId),r.$options.api.pollingId=setInterval((function(){n(I(e))}),r.$options.api.pollingTime)):n(I(e));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),H=function(t){for(var e in t.$fields)t.$loadingStates[e]=new N},q=function(t,e,n){e.update({},i({},n,t))},G=function(t){t.$fields||Y('Field "$fields" is required for Entity child')},U=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var o in t.$fields)Object.keys(r).length&&void 0!==r[o]?(null!==t.$fields[o].handler&&t.$fields[o].handler(r[o]),t[o]=r[o]):t[o]=t.$fields[o].default;Q(t,!1)&&(T=S(q,null==t||null===(e=t.$options)||void 0===e||null===(n=e.api)||void 0===n?void 0:n.debounceTime))},J=function(){var t=y($().mark((function t(e,n,r){var o,i,a,u,l;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.$fields[n],i=A(r)&&"function"==typeof r.then||m(r)===m(o.type(r)),e.$isPrepared||(e["_"+n]=r),!i){t.next=28;break}if(e["_"+n]!==r){t.next=6;break}return t.abrupt("return");case 6:if(!e.$isPrepared){t.next=26;break}if(!Q(e,!1)||null==e||null===(a=e.$options)||void 0===a||null===(u=a.api)||void 0===u||!u.watcherEnabled){t.next=23;break}if("function"!=typeof r.then){t.next=19;break}return e.changeApiLoadingStatus(!0),e.updateLoadingByData(!0,{},n),t.next=13,r;case 13:l=t.sent,e["_"+n]=l[n],e.changeApiLoadingStatus(!1),e.updateLoadingByData(!1,{},n),t.next=21;break;case 19:T(r,e,n),e["_"+n]=r;case 21:t.next=24;break;case 23:e["_"+n]=r;case 24:null!==o.handler&&o.handler(r),null!==e["_"+n]&&"function"==typeof e["_"+n].then&&e["_"+n].then((function(t){e["_"+n]=t[n],e.changeApiLoadingStatus(!1),e.updateLoadingByData(!1,{},n)}));case 26:t.next=29;break;case 28:e["_"+n]=e["_"+n];case 29:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),V=function(t){var e=function(e){new Promise((function(n){Object.defineProperty(t,e,{get:function(){return t["_"+e]},set:function(n){J(t,e,n)}}),n()})).then((function(){!function(t,e,n){if(null!==t.$fields[e].valueHandler&&!t.$fields[e].valueHandler(t,e,n))throw Y("Value '".concat(e,"' doesn't match to data type")),new Error}(t,e,t[e])}))};for(var n in t.$fields)e(n)},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.error(t)},Q=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=(null===(t=n.$options)||void 0===t||null===(e=t.api)||void 0===e?void 0:e.isEnabled)||!1;return!(!n.$options.api.alias&&!o)&&(!o&&r&&Y(j),o)},W=function(t){E(t.$options,B.globalOptions)},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new t,r=n.createPayload();return Object.keys(e).length?L(r,e):r},K=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:99;return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},Z=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e="",n=0;n<t;n++)e+=tt[X(0,tt.length-1)]+" ";return e},tt=["hello","world","nice","fruit","you","strong","top","word","sea","awesome","go","travel"],et=function(){return!!X(0,1)},nt=function(){for(var t=tt.slice(0,X(0,tt.length-1)),e=t.length,n=0;0!==e;){n=Math.floor(Math.random()*e),e--;var r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t},rt=function(){for(var t=X(1,5),e=[nt,et,X,K,Z],n={},r=0;r<t;r++){var o=X(0,tt.length-1),i=X(0,e.length-1);n.id=X(),n[tt[o]]=e[i]()}return n},ot={string:Z,number:X,boolean:et,object:rt,array:nt,null:function(){return null}},it=function(t){return Array.isArray(t)?"array":null===t?"null":m(t)};var at=function(t){b(u,t);var n,r,i,a=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(i){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function u(t){return o(this,u),a.call(this,t)}return e(u,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.createApiPayload(t);return console.info(e),this}},{key:"read",value:function(){return console.info(this),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.createApiPayload(t);return console.info(e),this}},{key:"delete",value:function(){return console.info(this),this}}],[{key:"populateMockData",value:function(t){for(var e in t.$fields){var n=t[e],r=it(n),o=ot[r];t[e]=o()}}},{key:"mockCreateList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=0;o<t;o++){var i=new e||this;u.populateMockData(i),E(i,n),r.push(i)}return r}},{key:"asyncMockCreateList",value:(n=y($().mark((function t(){var e,n,r=this,o=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,n=o.length>1&&void 0!==o[1]?o[1]:500,t.abrupt("return",new Promise((function(t){var o=r;setTimeout((function(){return t(u.mockCreateList(e,o))}),n)})).then((function(t){return t})));case 3:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}]),u}(B),ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===t.length)return 1;var e=t[t.length-1];if(!e||!e.id)throw new Error("incrementor.js: item in array must have id property");return e.id++},lt=function(){function t(){o(this,t)}return e(t,[{key:"invoke",value:function(){return!0}}]),t}(),ct=function(){function t(){o(this,t)}return e(t,[{key:"create",value:function(){return!0}},{key:"update",value:function(){return!0}},{key:"read",value:function(){return!0}},{key:"delete",value:function(){return!0}}],[{key:"validateEntity",value:function(t){return t.$options.api.alias&&Q(t)}},{key:"validateValue",value:function(t){return A(t)}}]),t}();function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}var pt=e((function t(e,n,r,a){o(this,t),i(this,"method","GET"),i(this,"headers",{"Content-Type":"application/json;charset=utf-8"}),i(this,"body",null),i(this,"signal",null),e&&(this.method=e),n&&(this.headers=n),r&&(this.body=r),a&&(this.signal=a)})),dt=function(t){b(i,t);var n,r=ht(i);function i(){return o(this,i),r.call(this)}return e(i,[{key:"formUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=B.globalOptions.api,i=t||o.baseUrl,a="/".concat(e||o.alias),u=n?"/".concat(n):"",l=r?"?".concat(new URLSearchParams(r).toString()):"";return"".concat(i).concat(a).concat(u).concat(l)}},{key:"call",value:(n=y($().mark((function t(e,n,r){var o,i,a,u,l,c,s=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:null,i=s.length>4?s[4]:void 0,a=s.length>5?s[5]:void 0,t.next=5,e.changeApiLoadingStatus(!0);case 5:return e.$loadingController=new AbortController,u=e.$loadingController.signal,l=ft(ft({},o||new pt),{},{signal:u}),t.prev=8,t.next=11,fetch(this.formUrl(n,r,i,a),l);case 11:return c=t.sent,t.next=14,c.json();case 14:return t.abrupt("return",t.sent);case 17:return t.prev=17,t.t0=t.catch(8),console.error(t.t0),t.abrupt("return",t.t0);case 21:case"end":return t.stop()}}),t,this,[[8,17]])}))),function(t,e,r){return n.apply(this,arguments)})}]),i}(lt),vt=function(t){b(r,t);var n=ht(r);function r(){return o(this,r),n.apply(this,arguments)}return e(r)}(dt),yt=function(t){b(r,t);var n=ht(r);function r(){return o(this,r),n.apply(this,arguments)}return e(r)}(dt),gt=function(t){b(i,t);var n,r=ht(i);function i(){return o(this,i),r.apply(this,arguments)}return e(i,[{key:"invoke",value:(n=y($().mark((function t(e,n,r,o,i){var a;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new pt(this.method,e.$options.api.headers),t.next=3,this.call(e,o,n,a,r,i);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i){return n.apply(this,arguments)})}]),i}(vt),bt=function(t){b(a,t);var n,r=ht(a);function a(){var t;o(this,a);for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return i(w(t=r.call.apply(r,[this].concat(n))),"method","POST"),t}return e(a,[{key:"invoke",value:(n=y($().mark((function t(e,n,r,o,i,a){var u,l;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=n,r&&((u={})[r]=n),l=new pt(this.method,e.$options.api.headers,JSON.stringify(u)),t.next=5,this.call(e,o,i,l,null,a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i,a){return n.apply(this,arguments)})}]),a}(yt),mt=function(t){b(r,t);var n=ht(r);function r(){var t;o(this,r);for(var e=arguments.length,a=new Array(e),u=0;u<e;u++)a[u]=arguments[u];return i(w(t=n.call.apply(n,[this].concat(a))),"method","PUT"),t}return e(r,[{key:"invoke",value:function(t,e,n,r,o,i){var a=e;n&&((a={})[n]=e);var u=new pt(this.method,t.$options.api.headers,JSON.stringify(a));return this.call(t,r,o,u,t.id,i)}}]),r}(yt),wt=function(t){b(a,t);var n,r=ht(a);function a(){var t;o(this,a);for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return i(w(t=r.call.apply(r,[this].concat(n))),"method","DELETE"),t}return e(a,[{key:"invoke",value:(n=y($().mark((function t(e,n,r,o){var i;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new pt(this.method,e.$options.api.headers),t.next=3,this.call(e,n,r,i,e.id,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o){return n.apply(this,arguments)})}]),a}(yt),kt=function(t){b(r,t);var n=ht(r);function r(){return o(this,r),n.apply(this,arguments)}return e(r,[{key:"create",value:function(t,e,n,r){return ct.validateEntity(t)&&ct.validateValue(e)?(new bt).invoke(t,e,n,r):e}},{key:"update",value:function(t,e,n,r){if(ct.validateEntity(t)&&ct.validateValue(e)){var o=t.$options.api,i=o.baseUrl,a=o.alias;return"object"===m(e)?(new mt).invoke(t,e,null,i,a,r):(new mt).invoke(t,e,n,i,a,r)}return e}},{key:"read",value:function(t,e,n){if(ct.validateEntity(t))return(new gt).invoke(t,t.$options.api.alias,e,null,n)}},{key:"delete",value:function(t,e){if(ct.validateEntity(t))return(new wt).invoke(t,e)}}]),r}(ct);function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}var jt=e((function t(e,n,r,a){o(this,t),i(this,"method","POST"),i(this,"headers",{"Content-Type":"application/json;charset=utf-8"}),i(this,"body",null),i(this,"signal",null),e&&(this.method=e),n&&(this.headers=n),r&&(this.body=r),a&&(this.signal=a)})),Pt=function(t){b(i,t);var n,r=$t(i);function i(){return o(this,i),r.call(this)}return e(i,[{key:"formUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=B.globalOptions.api;return t||e.baseUrl}},{key:"call",value:(n=y($().mark((function t(e,n,r){var o,i,a,u,l=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>3&&void 0!==l[3]?l[3]:null,t.next=3,e.changeApiLoadingStatus(!0);case 3:return e.$loadingController=new AbortController,i=e.$loadingController.signal,a=Ot(Ot({},o||new pt),{},{signal:i}),t.prev=6,t.next=9,fetch(this.formUrl(n,r),a);case 9:return u=t.sent,t.next=12,u.json();case 12:return t.abrupt("return",t.sent);case 15:return t.prev=15,t.t0=t.catch(6),console.error(t.t0),t.abrupt("return",t.t0);case 19:case"end":return t.stop()}}),t,this,[[6,15]])}))),function(t,e,r){return n.apply(this,arguments)})}]),i}(lt),St=function(t){b(a,t);var n,r=$t(a);function a(){var t;o(this,a);for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return i(w(t=r.call.apply(r,[this].concat(n))),"method","POST"),t}return e(a,[{key:"invoke",value:(n=y($().mark((function t(e,n,r,o,i,a){var u,l,c,s,f,h;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=e.$options.api.gql,l=u.queryParams,c=u.variables,s=u.aliasForOne,f=(new Et).buildQuery(e,i,l,c,a,s),h=new jt(this.method,e.$options.api.headers,JSON.stringify(f)),t.next=5,this.call(e,o,i,h);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i,a){return n.apply(this,arguments)})}]),a}(Pt),Et=function(t){b(r,t);var n=$t(r);function r(){return o(this,r),n.apply(this,arguments)}return e(r,[{key:"buildQuery",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5?arguments[5]:void 0,a=Object.keys(t.$fields).join(" "),u="";for(var l in n)u+="$".concat(l,": ").concat(n[l],",");var c="",s=e;if(null!==o)for(var f in s=i,n)c="id: ".concat(Number(o));else for(var h in n)c+="".concat(h,": $").concat(h);var p="query (".concat(u,") {\n          ").concat(s," (").concat(c,") {\n            data { ").concat(a," }\n          }\n        }");return null!==o&&(p="\n        query {\n          ".concat(s," (").concat(c,") {").concat(a,"}\n        }\n      ")),{operationName:null,query:p,variables:r}}},{key:"buildMutation",value:function(){return{operationName:null,query:"mutation (\n      $id: ID!,\n      $data: UpdatePostInput!\n    ) {\n      updatePost(id: $id, data: $data) {\n        id\n        body\n      }\n    }"}}}]),r}(Pt),Lt=function(t){b(i,t);var n,r=$t(i);function i(){return o(this,i),r.apply(this,arguments)}return e(i,[{key:"read",value:(n=y($().mark((function t(e){var n,r,o,i,a,u,l=arguments;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:null,!ct.validateEntity(e)){t.next=9;break}return r=e.$options.api,o=r.baseUrl,i=r.alias,a=r.gql,t.next=5,(new St).invoke(e,null,null,o,i,n);case 5:if(u=t.sent,null===n){t.next=8;break}return t.abrupt("return",u.data[a.aliasForOne]);case 8:return t.abrupt("return",u.data[i].data);case 9:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})}]),i}(ct)})(),r})()));